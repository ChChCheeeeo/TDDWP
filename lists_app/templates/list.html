{% extends 'base.html' %}

<!--
            To get our browser to send a POST request, we need to do two things:

                Give the <input> element a name= attribute
                Wrap it in a <form> tag with method="POST".

-->
{% block header_text %}Your To-Do list{% endblock %}
<!--
    Combine one view and URL for displaying a list and one view and URL for processing additions to that list.
-->
<!--{ % block form_action % }/lists/{ { list.id } }/{ % endblock % }-->
<!--
    You can replace the hardcoded URL with a Django template tag which refers to the URL’s "name"
    url(r'^new$', views.new_list, name='new_list'),
-->
{% block form_action %}{% url 'view_list' list.id %}{% endblock %}
<!-- { % block form_action % }/lists/{{ list.id }}/add_item{ % endblock % } -->

{% block table %}
    <table id="id_list_table" class="table">
            <!--
                .item_set is called a "reverse lookup"—it’s one of Django’s incredibly useful bits of ORM that lets you look up an object’s related items from a different table
            -->
        {% for item in list.item_set.all %}
            <tr><td>{{ forloop.counter }}: {{ item.text }}</td></tr>
        {% endfor %}
    </table>
{% endblock %}

{% block extra_content %}
    <div class="col-md-4 col-md-offset-1">
        <h3>Share this list:</h3>
        <form class="form-inline" method="POST" action="lists/<list_id>/share">
            {% csrf_token %}
            <input name="email" placeholder="your-friend@example.com" />
        </form>
     </div>
{% endblock %}